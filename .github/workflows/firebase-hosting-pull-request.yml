# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

# name: Deploy to Firebase Hosting on PR
# 'on': pull_request
# jobs:
#   build_and_preview:
#     if: '${{ github.event.pull_request.head.repo.full_name == github.repository }}'
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v3
#       - uses: FirebaseExtended/action-hosting-deploy@v0
#         with:
#           repoToken: '${{ secrets.GITHUB_TOKEN }}'
#           firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_DEPLOY_TEST_5698 }}'
#           projectId: deploy-test-5698
name: Build & upload to Firebase App Distribution 

on: [push]

env:
  FLUTTER_CHANNEL: "stable"
  JAVA_VERSION: "18.x"

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: set up JDK 18
      uses: actions/setup-java@v1
      with:
        java-version: ${{env.JAVA_VERSION}}
    - name: build release
      uses: subosito/flutter-action@v1
      with:
        channel: ${{env.FLUTTER_CHANNEL}}
          # - run: flutter clean
          # - run: flutter pub get
          # - run: flutter build apk --release 
    - run: | 
        echo "GITHUB_RUN_ATTEMPT: ${GITHUB_RUN_ATTEMPT}"
        echo "GITHUB_RUN_NUMBER: ${GITHUB_RUN_NUMBER}"
          # - name: upload artifact to Firebase App Distribution
          #   uses: wzieba/Firebase-Distribution-Github-Action@v0
          #   with:
          #     appId: ${{secrets.FIREBASE_APP_ID}}
          #     serviceCredentialsFileContent: ${{ secrets.CREDENTIAL_FILE_CONTENT }}
          #     groups: testers
          #     file: build/app/outputs/flutter-apk/app-release.apk
